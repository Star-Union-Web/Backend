{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container">
    <h1>{{ object.title }}</h1>
    <div class="divider"></div>
    <div class="horizontal-top">
        <img src="{{ object.author.userprofile.image.url }}" class="profile-img" width="55px">
    <p>Written By: <a href="{% url 'readprofile' object.author.id %}">{{ object.author.username }}</a> </p>
    <p>Date: {{ object.date_posted }}</p>
    </div>
    <div class="divider"></div>
    {{ object.content|safe }}

    <h2>Comments</h2>
    <div class="divider"></div>
    
    <form method="POST" action="{% url 'create_comment' object.id%}">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit" class="btn">Post</button>
    </form>
    <ul>
    {% if not comments %}
    <p>This post has no comments</p>
    {% else %}
    {% for comment in comments %}
    <div class="profile-comment-replied">
        <img src="{{ comment.author.userprofile.image.url }}" width="30px" class="profile-img">
        <a href="{% url 'readprofile' comment.author.id %}">{{ comment.author }}</a>
        <p> @ {{ comment.date_posted }}</p>
    </div>
    <div class="comment-block profile-comment-cont">
        {{ comment.content }}
        {% if user.id == comment.author.id %}
            <a href="{% url 'delete_comment' comment.id %}"><button class="btn img-btn"> <img src="{% static 'delete_ico_yellow.png' %}" width="30px"> </button></a>
        {% endif %}
    </div>
    <br>
    {% endfor %}
    {% endif %}
    </ul>

</div>
{% endblock %}

